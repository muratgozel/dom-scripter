!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Scripter=e()}(this,(function(){"use strict";function t(){this.timeout=1e4}return t.prototype.reCSSExt=/(.css)/,t.prototype.supportedLocations=["bodyEnd","bodyStart","headEnd"],t.prototype.inject=function(t,e){var n=this;if(!e.id)throw new Error("Missing id for an injected script.");var o=n.reCSSExt.test(t),r=o?"link":"script";return new Promise((function(i,d){if(document.getElementById(e.id))return i(e.id);var a=setTimeout((function(){return d(new Error("TIMEOUT"))}),n.timeout),s=document.createElement(r);function c(){return o&&(s.media=e.media||"all"),clearTimeout(a),i(e.id)}s.id=e.id,"link"==r&&(s.rel="stylesheet",s.href=t,s.media="only x"),"script"==r&&(s.type=e.type||"text/javascript",s.async=!e.hasOwnProperty("async")||e.async),e.attrs&&Object.keys(e.attrs).map((function(t){return s.setAttribute(t,e.attrs[t])})),s.addEventListener?s.addEventListener("load",c,!1):s.readyState?s.onreadystatechange=c:s.onload&&(s.onload=c),s.onerror&&(s.onerror=function(t){return clearTimeout(a),d(t)}),"script"==r&&(s.src=t),n.injectToLocation(s,e.location)}))},t.prototype.injectJSONLD=function(t,e){if(e.id&&document.getElementById(e.id))return null;var n=document.createElement("script");n.type="application/ld+json",e.id&&(n.id=e.id),e.attrs&&Object.keys(e.attrs).map((function(t){return n.setAttribute(t,e.attrs[t])})),n.text="string"==typeof t?t:JSON.stringify(t),this.injectToLocation(n,e.location)},t.prototype.injectToLocation=function(t,e){var n=e||this.supportedLocations[0];if(-1!==this.supportedLocations.indexOf(n)){var o=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("body")[0];"headEnd"==n?o.insertBefore(t,null):"bodyEnd"==n?r.insertBefore(t,null):"bodyStart"==n&&r.insertBefore(t,r.firstChild)}},t.prototype.remove=function(t){var e=document.getElementById(t);e&&e.parentNode.removeChild(e)},new t}));
