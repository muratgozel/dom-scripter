function Scripter(){this.processingIds=[],this.timeoutInterval=7e3}Scripter.prototype.inject=function(a,b={}){const c=this,d=a.lastIndexOf("."),e="css"==a.slice(d+1,d+4)?"css":"js";return new Promise(function(d,f){function g(){return"css"==e&&(i.media=b.media||"all"),clearTimeout(h),d(b.id)}if("string"==typeof b.id&&document.getElementById(b.id))return d(b.id);if("string"==typeof b.id&&-1!==c.processingIds.indexOf(b.id)){const a=new Error("Script already being injected. ("+b.id+")");return f(a)}let h=setTimeout(function(){const b=new Error("Script injection timeout. ("+a+")");return f(b)},c.timeoutInterval);const i=document.createElement("js"==e?"script":"link");"css"==e?(i.rel="stylesheet",i.href=a,i.media="only x"):(i.type=b.type||"text/javascript",i.async=!b.hasOwnProperty("async")||b.async),"string"==typeof b.id&&(i.id=b.id),b.attrs&&Object.keys(b.attrs).map(function(a){i.setAttribute(a,b.attrs[a])}),i.addEventListener?i.addEventListener("load",g,!1):i.readyState?i.onreadystatechange=g:i.onload&&(i.onload=g),i.onerror&&(i.onerror=onErr),"js"==e&&(i.src=a);let j=document.getElementsByTagName("script");(!j||1>j.length)&&(j=document.getElementsByTagName("head"));const k=j[0];k.parentNode.insertBefore(i,k),j=null})},Scripter.prototype.injectJSONLD=function(a,b={}){if("string"==typeof b.id){const a=document.getElementById(b.id);a&&a.parentNode.removeChild(a)}const c=document.createElement("script");c.type="application/ld+json","string"==typeof b.id&&(c.id=b.id),b.attrs&&Object.keys(b.attrs).map(function(a){c.setAttribute(a,b.attrs[a])}),c.text="string"==typeof a?a:JSON.stringify(a);let d=document.getElementsByTagName("script");(!d||1>d.length)&&(d=document.getElementsByTagName("head"));const e=d[0];e.parentNode.insertBefore(c,e),d=null},Scripter.prototype.remove=function(a={}){const b=document.getElementById(a.id||"");b&&b.parentNode.removeChild(b)},module.exports=new Scripter;